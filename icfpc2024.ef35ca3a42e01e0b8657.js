/*! For license information please see icfpc2024.ef35ca3a42e01e0b8657.js.LICENSE.txt */
(()=>{var e={511:function(e,t,a){var r;(function(){var n,o,i,s,l;i=/^-?[£$¤]?[\d,.]+%?$/,l=/^\s+|\s+$/g,o=["click"],"ontouchstart"in document.documentElement&&o.push("touchstart"),n=function(e,t,a){return null!=e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent("on"+t,a)},s={init:function(e){var t,a,r,n,o;for(null==e&&(e={}),null==e.selector&&(e.selector="table[data-sortable]"),o=[],r=0,n=(a=document.querySelectorAll(e.selector)).length;n>r;r++)t=a[r],o.push(s.initTable(t));return o},initTable:function(e){var t,a,r,n,o,i;if(1===(null!=(i=e.tHead)?i.rows.length:void 0)&&"true"!==e.getAttribute("data-sortable-initialized")){for(e.setAttribute("data-sortable-initialized","true"),t=n=0,o=(r=e.querySelectorAll("th")).length;o>n;t=++n)"false"!==(a=r[t]).getAttribute("data-sortable")&&s.setupClickableTH(e,a,t);return e}},setupClickableTH:function(e,t,a){var r,i,l,u,d,c;for(l=s.getColumnType(e,a),i=function(r){var n,o,i,u,d,c,p,f,m,h,v,g,$,b,x,y,C,w,A,k,j,S,T,O;if(!0===r.handled)return!1;for(r.handled=!0,p="true"===this.getAttribute("data-sorted"),f=this.getAttribute("data-sorted-direction"),i=p?"ascending"===f?"descending":"ascending":l.defaultSortDirection,$=0,C=(h=this.parentNode.querySelectorAll("th")).length;C>$;$++)(t=h[$]).setAttribute("data-sorted","false"),t.removeAttribute("data-sorted-direction");if(this.setAttribute("data-sorted","true"),this.setAttribute("data-sorted-direction",i),m=e.tBodies[0],c=[],p){for(y=0,k=(O=m.rows).length;k>y;y++)o=O[y],c.push(o);for(c.reverse(),S=0,j=c.length;j>S;S++)d=c[S],m.appendChild(d)}else{for(g=null!=l.compare?l.compare:function(e,t){return t-e},n=function(e,t){return e[0]===t[0]?e[2]-t[2]:l.reverse?g(t[0],e[0]):g(e[0],t[0])},u=b=0,w=(T=m.rows).length;w>b;u=++b)d=T[u],v=s.getNodeValue(d.cells[a]),null!=l.comparator&&(v=l.comparator(v)),c.push([v,d,u]);for(c.sort(n),x=0,A=c.length;A>x;x++)d=c[x],m.appendChild(d[1])}return"function"==typeof window.CustomEvent&&"function"==typeof e.dispatchEvent?e.dispatchEvent(new CustomEvent("Sortable.sorted",{bubbles:!0})):void 0},c=[],u=0,d=o.length;d>u;u++)r=o[u],c.push(n(t,r,i));return c},getColumnType:function(e,t){var a,r,n,o,i,l,u,d,c,p,f;if(null!=(r=null!=(c=e.querySelectorAll("th")[t])?c.getAttribute("data-sortable-type"):void 0))return s.typesObject[r];for(i=0,u=(p=e.tBodies[0].rows).length;u>i;i++)for(a=p[i],n=s.getNodeValue(a.cells[t]),l=0,d=(f=s.types).length;d>l;l++)if((o=f[l]).match(n))return o;return s.typesObject.alpha},getNodeValue:function(e){var t;return e?null!==(t=e.getAttribute("data-value"))?t:void 0!==e.innerText?e.innerText.replace(l,""):e.textContent.replace(l,""):""},setupTypes:function(e){var t,a,r,n;for(s.types=e,s.typesObject={},n=[],a=0,r=e.length;r>a;a++)t=e[a],n.push(s.typesObject[t.name]=t);return n}},s.setupTypes([{name:"numeric",defaultSortDirection:"descending",match:function(e){return e.match(i)},comparator:function(e){return parseFloat(e.replace(/[^0-9.-]/g,""),10)||0}},{name:"date",defaultSortDirection:"ascending",reverse:!0,match:function(e){return!isNaN(Date.parse(e))},comparator:function(e){return Date.parse(e)||0}},{name:"alpha",defaultSortDirection:"ascending",match:function(){return!0},compare:function(e,t){return e.localeCompare(t)}}]),setTimeout(s.init,0),void 0===(r=function(){return s}.call(t,a,t,e))||(e.exports=r)}).call(this)}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=a(511),t=a.n(e);function r(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)e[r]=a[r]}return e}var n=function e(t,a){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=r({},a,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],r={},n=0;n<a.length;n++){var o=a[n].split("="),i=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=t.read(i,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){n(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const o="https://boundvariable.space",i="apitoken",s="course";function l(e){var t=$("<div>");t.addClass("alert"),t.addClass("alert-danger"),t.text(e),$("#loginform").append(t)}function u(e){n.set(i,e,{expires:31}),window.location.href="team.html"}function d(e){e.preventDefault(),$("#loginbutton").prop("disabled",!0),$.ajax({type:"POST",url:o+"/login",data:JSON.stringify({email:$("#email").val(),password:$("#password").val()}),success:u,error:function(e){$("#loginbutton").prop("disabled",!1),401==e.status?l("Email/password combination not found"):l("Unknown login error: "+e.status)}})}function c(e){e.preventDefault(),$("#updatebutton").prop("disabled",!0);var t=n.get(i),a=$("#cur-password").val();if(a){var r=$("#new-password").val(),s=$("#email").val(),l=$("#name").val();$.ajax({type:"POST",url:o+"/team/update",data:JSON.stringify({email:s,name:l,password:a,newpassword:r||void 0}),headers:{Authorization:"Bearer "+t},error:function(e){401==e.status?p("Invalid password","alert-danger"):p("Updating details failed","alert-danger"),$("#updatebutton").prop("disabled",!1)},success:function(){p("Team details updated","alert-success"),$("#teamname").text(l+" ("+s+")"),$("#updatebutton").prop("disabled",!1)}})}else p("Current password must be given","alert-danger")}function p(e,t){var a=$("<div>");a.addClass("alert"),a.addClass(t),a.text(e),$("#updateform").append(a)}function f(e){e.preventDefault(),$("#codesubmit").prop("disabled",!0);var t=n.get(i);$.ajax({type:"POST",url:o+"/codesubmit",data:JSON.stringify({url:$("#url").val(),language:$("#language").val(),juryprize:$("#jury-prize").val()}),headers:{Authorization:"Bearer "+t},error:function(e){m("Code submission failed","alert-danger")},success:function(){m("Submission was saved","alert-success")}})}function m(e,t){var a=$("<div>");a.addClass("alert"),a.addClass(t),a.text(e),$("#codesubmitform").append(a)}function h(e){$(e).html('Please <a href="login.html">log in</a> first.')}function v(e){e.preventDefault(),$("#registerbutton").prop("disabled",!0),$.ajax({type:"POST",url:o+"/register",data:JSON.stringify({email:$("#email").val(),password:$("#password").val(),name:$("#name").val()}),success:u,error:function(e){var t,a;$("#registerbutton").prop("disabled",!1),t=e.responseText,(a=$("<div>")).addClass("alert"),a.addClass("alert-danger"),a.text(t),$("#registerform").append(a)}})}function g(){void 0!==n.get(i)?($("#loginlink").text("Team"),$("#loginlink").attr("href","team.html")):($("#loginlink").text("Log in"),$("#loginlink").attr("href","login.html"))}function b(e=1){var t=n.get(i);$.ajax({url:o+"/team/history",headers:{Authorization:"Bearer "+t},data:{page:e},success:function(t){var a=$("<table>"),r=$("<thead>"),n=$("<tr>");for(var o of["Date/time","Request hash","Response hash"]){var i=$("<th>");i.text(o),n.append(i)}r.append(n),a.append(r);var s=$("<tbody>");for(var l of t){var u=$("<tr>"),d=$("<td>");d.text(l.createdAt),u.append(d);var c=$("<td>");c.text(l.request),u.append(c);var p=$("<td>");p.text(l.response),u.append(p);var f=$("<td>"),m=$("<a>");m.attr("href","#"),m.on("click",{uuid:l.uuid},x),m.text("Load"),f.html(m),u.append(f),s.append(u)}a.append(s),$("#history").html(a);var h=$("<a>");h.addClass("paper-btn"),h.html("&larr; Previous page"),e>1?h.on("click",{page:e-1},(function(e){b(e.data.page)})):h.addClass("disabled"),$("#history").append(h),$("#history").append(" ");var v=$("<a>");v.addClass("paper-btn"),v.html("Next page &rarr;"),t.length>=100?v.on("click",{page:e+1},(function(e){b(e.data.page)})):v.addClass("disabled"),$("#history").append(v)}})}function x(e){var t=n.get(i);$.ajax({url:o+"/team/history/"+e.data.uuid+"/request",headers:{Authorization:"Bearer "+t},success:function(e){$("#input").val(e)}}),$.ajax({url:o+"/team/history/"+e.data.uuid+"/response",headers:{Authorization:"Bearer "+t},success:function(e){y(e)},error:function(e){$("#output").text("Response could not be loaded")}})}function y(e){var t=$("<pre>"),a=$("<code>");a.text(e),t.html(a),$("#output").html(t)}function C(){var e=n.get(i);e?($("#communicateform").on("submit",(function(t){t.preventDefault(),$("#communicate").prop("disabled",!0),$.ajax({type:"POST",url:o+"/communicate",headers:{Authorization:"Bearer "+e},data:$("#input").val(),success:function(e){console.log("Response:",e),$("#communicate").prop("disabled",!1),y(e)},error:function(e){console.log("Error:",e)}})})),b()):h("#communicatepage")}$(document).ready((function(){g();var e=$("#loginform");e.length&&e.on("submit",d);var a,r=$("#registerform");r.length&&r.on("submit",v),$("#teampage").length&&((a=n.get(i))?$.ajax({url:o+"/team",headers:{Authorization:"Bearer "+a},success:function(e){$("#teamname").text(e.name+" ("+e.email+")"),$("#teamtoken").text("Authorization: Bearer "+a),$("#logout").on("click",(function(){n.remove(i),$("#teampage").text("You are now logged out."),g()})),$("#refreshapitoken").on("click",(function(){confirm("This will invalidate all sessions, are you sure?")&&function(){var e=n.get(i);$.ajax({type:"POST",url:o+"/team/refresh_token",headers:{Authorization:"Bearer "+e},success:u,error:()=>h("#teampage")})}()})),$("#name").val(e.name),$("#email").val(e.email),$("#updateform").on("submit",c),$("#codesubmitform").on("submit",f)},error:()=>h("#teampage")}):h("#teampage")),$("#scoreboard").length&&function(){$("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet",href:"css/sortable-theme-minimal.css"});var e=new URLSearchParams(window.location.search),a=e.has(s)?e.get(s):null;let r=a?"/scoreboard/"+a:"/scoreboard";var l={},u=n.get(i);u&&(l.Authorization="Bearer "+u),$.ajax({url:o+r,headers:l,success:e=>function(e,a){var r=$("<div>");if(e)$("#scoreboard-title").text("Scoreboard for "+e),r.append('<a class="paper-btn" href="scoreboard.html">&larr; Back to global scoreboard</a>');else{var n=a.columns.slice(2);for(const e of n)r.append('<a class="paper-btn" href="scoreboard.html?'+s+"="+e+'">'+e+"</a> ")}var o=$("<table data-sortable>");o.addClass("table-hover"),o.addClass("paper"),o.addClass("container");var i=$("<thead>"),l=$("<tr>");for(const e of a.columns){var u=$("<th>");u.attr("data-sortable-type","team"==e?"alpha":"numeric"),u.text(e),l.append(u)}i.append(l);var d=$("<tbody>");for(const e of a.rows){var c=$("<tr>");e.isYou&&c.addClass("background-secondary");for(const t of e.values){var p=$("<td>");null==t?p.attr("data-value",9999999):p.text(t),c.append(p)}d.append(c)}o.append(i),o.append(d),$("#scoreboard").html(r),$("#scoreboard").parent().parent().append(o),t().init()}(a,e)})}(),$("#communicatepage").length&&C()}))})()})();