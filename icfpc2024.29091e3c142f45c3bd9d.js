/*! For license information please see icfpc2024.29091e3c142f45c3bd9d.js.LICENSE.txt */
(()=>{var e={511:function(e,t,r){var a;(function(){var n,o,i,s,l;i=/^-?[£$¤]?[\d,.]+%?$/,l=/^\s+|\s+$/g,o=["click"],"ontouchstart"in document.documentElement&&o.push("touchstart"),n=function(e,t,r){return null!=e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)},s={init:function(e){var t,r,a,n,o;for(null==e&&(e={}),null==e.selector&&(e.selector="table[data-sortable]"),o=[],a=0,n=(r=document.querySelectorAll(e.selector)).length;n>a;a++)t=r[a],o.push(s.initTable(t));return o},initTable:function(e){var t,r,a,n,o,i;if(1===(null!=(i=e.tHead)?i.rows.length:void 0)&&"true"!==e.getAttribute("data-sortable-initialized")){for(e.setAttribute("data-sortable-initialized","true"),t=n=0,o=(a=e.querySelectorAll("th")).length;o>n;t=++n)"false"!==(r=a[t]).getAttribute("data-sortable")&&s.setupClickableTH(e,r,t);return e}},setupClickableTH:function(e,t,r){var a,i,l,u,d,c;for(l=s.getColumnType(e,r),i=function(a){var n,o,i,u,d,c,p,f,m,v,h,g,b,$,y,x,w,C,A,S,T,k,j,O;if(!0===a.handled)return!1;for(a.handled=!0,p="true"===this.getAttribute("data-sorted"),f=this.getAttribute("data-sorted-direction"),i=p?"ascending"===f?"descending":"ascending":l.defaultSortDirection,b=0,w=(v=this.parentNode.querySelectorAll("th")).length;w>b;b++)(t=v[b]).setAttribute("data-sorted","false"),t.removeAttribute("data-sorted-direction");if(this.setAttribute("data-sorted","true"),this.setAttribute("data-sorted-direction",i),m=e.tBodies[0],c=[],p){for(x=0,S=(O=m.rows).length;S>x;x++)o=O[x],c.push(o);for(c.reverse(),k=0,T=c.length;T>k;k++)d=c[k],m.appendChild(d)}else{for(g=null!=l.compare?l.compare:function(e,t){return t-e},n=function(e,t){return e[0]===t[0]?e[2]-t[2]:l.reverse?g(t[0],e[0]):g(e[0],t[0])},u=$=0,C=(j=m.rows).length;C>$;u=++$)d=j[u],h=s.getNodeValue(d.cells[r]),null!=l.comparator&&(h=l.comparator(h)),c.push([h,d,u]);for(c.sort(n),y=0,A=c.length;A>y;y++)d=c[y],m.appendChild(d[1])}return"function"==typeof window.CustomEvent&&"function"==typeof e.dispatchEvent?e.dispatchEvent(new CustomEvent("Sortable.sorted",{bubbles:!0})):void 0},c=[],u=0,d=o.length;d>u;u++)a=o[u],c.push(n(t,a,i));return c},getColumnType:function(e,t){var r,a,n,o,i,l,u,d,c,p,f;if(null!=(a=null!=(c=e.querySelectorAll("th")[t])?c.getAttribute("data-sortable-type"):void 0))return s.typesObject[a];for(i=0,u=(p=e.tBodies[0].rows).length;u>i;i++)for(r=p[i],n=s.getNodeValue(r.cells[t]),l=0,d=(f=s.types).length;d>l;l++)if((o=f[l]).match(n))return o;return s.typesObject.alpha},getNodeValue:function(e){var t;return e?null!==(t=e.getAttribute("data-value"))?t:void 0!==e.innerText?e.innerText.replace(l,""):e.textContent.replace(l,""):""},setupTypes:function(e){var t,r,a,n;for(s.types=e,s.typesObject={},n=[],r=0,a=e.length;a>r;r++)t=e[r],n.push(s.typesObject[t.name]=t);return n}},s.setupTypes([{name:"numeric",defaultSortDirection:"descending",match:function(e){return e.match(i)},comparator:function(e){return parseFloat(e.replace(/[^0-9.-]/g,""),10)||0}},{name:"date",defaultSortDirection:"ascending",reverse:!0,match:function(e){return!isNaN(Date.parse(e))},comparator:function(e){return Date.parse(e)||0}},{name:"alpha",defaultSortDirection:"ascending",match:function(){return!0},compare:function(e,t){return e.localeCompare(t)}}]),setTimeout(s.init,0),void 0===(a=function(){return s}.call(t,r,t,e))||(e.exports=a)}).call(this)}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(511),t=r.n(e);function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}var n=function e(t,r){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=a({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],a={},n=0;n<r.length;n++){var o=r[n].split("="),i=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(a[s]=t.read(i,s),e===s)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){n(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const o="https://boundvariable.space",i="apitoken",s="course";function l(e){var t=$("<div>");t.addClass("alert"),t.addClass("alert-danger"),t.text(e),$("#loginform").append(t)}function u(e){n.set(i,e,{expires:31}),window.location.href="team.html"}function d(e){e.preventDefault(),$("#loginbutton").prop("disabled",!0),$.ajax({type:"POST",url:o+"/login",data:JSON.stringify({email:$("#email").val(),password:$("#password").val()}),success:u,error:function(e){$("#loginbutton").prop("disabled",!1),401==e.status?l("Email/password combination not found"):l("Unknown login error: "+e.status)}})}function c(e){e.preventDefault(),$("#updatebutton").prop("disabled",!0);var t=n.get(i),r=$("#cur-password").val();if(r){var a=$("#new-password").val(),s=$("#email").val(),l=$("#name").val();$.ajax({type:"POST",url:o+"/team/update",data:JSON.stringify({email:s,name:l,password:r,newpassword:a||void 0}),headers:{Authorization:"Bearer "+t},error:function(e){401==e.status?p("Invalid password","alert-danger"):p("Updating details failed","alert-danger"),$("#updatebutton").prop("disabled",!1)},success:function(){p("Team details updated","alert-success"),$("#teamname").text(l+" ("+s+")"),$("#updatebutton").prop("disabled",!1)}})}else p("Current password must be given","alert-danger")}function p(e,t){var r=$("<div>");r.addClass("alert"),r.addClass(t),r.text(e),$("#updateform").append(r)}function f(e){e.preventDefault(),$("#codesubmit").prop("disabled",!0);var t=n.get(i);$.ajax({type:"POST",url:o+"/codesubmit",data:JSON.stringify({url:$("#url").val(),language:$("#language").val(),juryprize:$("#jury-prize").val()}),headers:{Authorization:"Bearer "+t},error:function(e){m("Code submission failed","alert-danger")},success:function(){m("Submission was saved","alert-success")}})}function m(e,t){var r=$("<div>");r.addClass("alert"),r.addClass(t),r.text(e),$("#codesubmitform").append(r)}function v(){$("#teampage").html('Please <a href="login.html">log in</a> first.')}function h(e){e.preventDefault(),$("#registerbutton").prop("disabled",!0),$.ajax({type:"POST",url:o+"/register",data:JSON.stringify({email:$("#email").val(),password:$("#password").val(),name:$("#name").val()}),success:u,error:function(e){var t,r;$("#registerbutton").prop("disabled",!1),t=e.responseText,(r=$("<div>")).addClass("alert"),r.addClass("alert-danger"),r.text(t),$("#registerform").append(r)}})}function g(){void 0!==n.get(i)?($("#loginlink").text("Team"),$("#loginlink").attr("href","team.html")):($("#loginlink").text("Log in"),$("#loginlink").attr("href","login.html"))}$(document).ready((function(){g();var e=$("#loginform");e.length&&e.on("submit",d);var r,a=$("#registerform");a.length&&a.on("submit",h),$("#teampage").length&&((r=n.get(i))?$.ajax({url:o+"/team",headers:{Authorization:"Bearer "+r},success:function(e){$("#teamname").text(e.name+" ("+e.email+")"),$("#teamtoken").text("Authorization: Bearer "+r),$("#logout").on("click",(function(){n.remove(i),$("#teampage").text("You are now logged out."),g()})),$("#refreshapitoken").on("click",(function(){confirm("This will invalidate all sessions, are you sure?")&&function(){var e=n.get(i);$.ajax({type:"POST",url:o+"/team/refresh_token",headers:{Authorization:"Bearer "+e},success:u,error:v})}()})),$("#name").val(e.name),$("#email").val(e.email),$("#updateform").on("submit",c),$("#codesubmitform").on("submit",f)},error:v}):v()),$("#scoreboard").length&&function(){$("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet",href:"css/sortable-theme-minimal.css"});var e=new URLSearchParams(window.location.search),r=e.has(s)?e.get(s):null;let a=r?"/scoreboard/"+r:"/scoreboard";$.ajax({url:o+a,success:e=>function(e,r){var a=$("<div>");if(e)$("#scoreboard-title").text("Scoreboard for "+e),a.append('<a class="paper-btn" href="scoreboard.html">&#x2190; Back to global scoreboard</a>');else{var n=r.columns.slice(2);for(const e of n)a.append('<a class="paper-btn" href="scoreboard.html?'+s+"="+e+'">'+e+"</a> ")}var o=$("<table data-sortable>");o.addClass("table-hover"),o.addClass("paper"),o.addClass("container");var i=$("<thead>"),l=$("<tr>");for(const e of r.columns){var u=$("<th>");u.attr("data-sortable-type","team"==e?"alpha":"numeric"),u.text(e),l.append(u)}i.append(l);var d=$("<tbody>");for(const e of r.rows){var c=$("<tr>");for(const t of e){var p=$("<td>");null==t?p.attr("data-value",9999999):p.text(t),c.append(p)}d.append(c)}o.append(i),o.append(d),$("#scoreboard").html(a),$("#scoreboard").parent().parent().append(o),t().init()}(r,e)})}()}))})()})();